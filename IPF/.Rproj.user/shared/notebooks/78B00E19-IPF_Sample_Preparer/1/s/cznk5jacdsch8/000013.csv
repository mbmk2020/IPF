"0","#Extract HH data for specific PUMA..."
"0","options(""scipen""=100, ""digits""=4) # to avoid exponential formatting for numbers"
"0","PUMAs = c(1201)"
"0",""
"0","#Household Sample"
"0","h_sample <- HH_Sample_5_Y%>%"
"0","  mutate_all(as.numeric)%>%"
"0","  filter(PUMA%in%PUMAs)%>%"
"0","  select(SERIALNO, PUMA, NP,HHT, HINCP,	WIF, HUPAC)%>%"
"0","  mutate(hhrtotals=1,hhtotals =1)"
"2","Warning:"
"2"," [38;5;232mProblem while computing `RT = .Primitive(""as.double"")(RT)`.
[36mi[38;5;232m NAs introduced by coercion[39m
"
"0","h_sample[h_sample$HHT%in%c(4,5,6,7),]$WIF = -1 # To fix WIF and HHT problem"
"0","h_sample = drop_na(h_sample)"
"0","h_sample = h_sample[h_sample$NP>0,]"
"0","h_sample = h_sample[h_sample$HHT>0,]"
"0","h_sample = h_sample[h_sample$HINCP>0,]"
"0","h_sample = h_sample[h_sample$HUPAC>0,]"
"0","h_sample[h_sample$HINCP%in%c(1:state_number),]$HINCP = 1"
"0","h_sample[h_sample$HINCP%in%c(25000:49999),]$HINCP = 2"
"0","h_sample[h_sample$HINCP%in%c(50000:74999),]$HINCP = 3"
"0","h_sample[h_sample$HINCP%in%c(75000:99999),]$HINCP = 4"
"0","h_sample[h_sample$HINCP%in%c(100000:199999),]$HINCP = 5"
"0","h_sample[h_sample$HINCP>=200000,]$HINCP = 6"
"0","h_sample[h_sample$NP>=7,]$NP = 7 "
"0","#h_sample = h_sample[h_sample$WIF>0,]"
"0",""
"0",""
"0","h_sample <-"
"0","  h_sample%>%"
"0","  rename(hid=SERIALNO,"
"0","         sample_geo=PUMA,"
"0","         hnp = NP,"
"0","         hhht = HHT,"
"0","         hhincp = HINCP,"
"0","         hwif = WIF,"
"0","         hhupac = HUPAC)"
"0",""
"0","write.csv(h_sample , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/household_sample.csv"", row.names=FALSE)"
"0",""
"0","#########################################################################################"
"0",""
"0","#Extract Person data for specific PUMA..."
"0","options(""scipen""=100, ""digits""=4) # to avoid exponential formatting for numbers"
"0",""
"0","#Household Sample"
"0","p_sample <- P_Sample_5_Y%>%"
"0","  mutate_all(as.numeric)%>%"
"0","  filter(PUMA%in%PUMAs)%>%"
"0","  mutate(ptotals=1,prtotals =1)%>%"
"0","  select(SERIALNO, SPORDER, PUMA,ptotals,prtotals, AGEP,SEX, ESR,	RAC1P)"
"2","Warning:"
"2"," [38;5;232mProblem while computing `RT = .Primitive(""as.double"")(RT)`.
[36mi[38;5;232m NAs introduced by coercion[39m
"
"2","Warning:"
"2"," [38;5;232mProblem while computing `NAICSP = .Primitive(""as.double"")(NAICSP)`.
[36mi[38;5;232m NAs introduced by coercion[39m
"
"2","Warning:"
"2"," [38;5;232mProblem while computing `SOCP = .Primitive(""as.double"")(SOCP)`.
[36mi[38;5;232m NAs introduced by coercion[39m
"
"0","p_sample[p_sample$AGEP<16,]$ESR = 0 # To fix ESR and HHT problem"
"0","#p_sample$ESR = p_sample$ESR +1 "
"0",""
"0",""
"0","p_sample <-"
"0","  p_sample%>%"
"0","  rename(hid=SERIALNO,"
"0","         pid=SPORDER,"
"0","         sample_geo=PUMA,"
"0","         rpage = AGEP,"
"0","         rpsex = SEX,"
"0","         rpesr = ESR,"
"0","         rpracp = RAC1P)"
"0",""
"0",""
"0",""
"0","write.csv(p_sample , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/person_sample.csv"", row.names=FALSE)"
"0",""
"0","####################################################################################"
"0",""
"0","#Selecting other needed files for POPGEN specific PUMAs"
"0","options(""scipen""=100, ""digits""=4) # to avoid exponential formatting for numbers"
"0",""
"0","#Select Specific PUMAs..."
"0","#PUMAs = c(1201)"
"0",""
"0","#filter for input PUMAs"
"0","geos = geo_sample_mapping_2[geo_sample_mapping_2$sample_geo%in%PUMAs,]$geo"
"0","regions = region_geo_mapping_2[region_geo_mapping_2$geo%in%geos,]$region"
"0",""
"0","geo_sample_mapping <-geo_sample_mapping_2%>%filter(geo%in%c(""geo"",geos))"
"0",""
"0",""
"0","household_marginals <- household_marginals_2%>%filter(variable_names%in%c(""variable_categories"",""geo"",""variable_names"",geos))"
"0",""
"0",""
"0","household_sample <- household_sample_2%>%filter(sample_geo%in%c(""sample_geo"",PUMAs))"
"0",""
"0","person_marginals <- person_marginals_2%>%filter(varialbe_names%in%c(""variable_categories"",""geo"",""varialbe_names"",geos))"
"0",""
"0","person_sample <- person_sample_2%>%filter(sample_geo%in%c(""sample_geo"",PUMAs))"
"0",""
"0","region_geo_mapping <- region_geo_mapping_2%>%filter(geo%in%c(""geo"",geos))"
"0",""
"0","region_household_marginals <- region_household_marginals_2%>%filter(variable_names%in%c(""variable_categories"",""region"",""variable_names"",regions))"
"0",""
"0","region_person_marginals <- region_person_marginals_2%>%filter(variable_names%in%c(""variable_categories"",""region"",""variable_names"",regions))"
"0",""
"0","region_sample_mapping <- region_sample_mapping_2%>%filter(region%in%c(""region"",regions))"
"0",""
"0",""
"0","write.table(geo_sample_mapping , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/geo_sample_mapping.csv"", sep="","", row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(household_marginals , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/household_marginals.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(household_sample , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/household_sample.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(person_marginals , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/person_marginals.csv"",sep="","", row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(person_sample , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/person_sample.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(region_geo_mapping , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/region_geo_mapping.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(region_household_marginals , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/region_household_marginals.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(region_person_marginals , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/region_person_marginals.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0","write.table(region_sample_mapping , ""C:/Users/mbmk2020/OneDrive - University of Maryland/Research/IPF(Test)/PopGen_Practice_Package/PopGen_Practice_Package/PopGen_Practice_Package/Maryland/region_sample_mapping.csv"", sep="","",row.names=FALSE, col.names = FALSE)"
"0",""
"0",""
"0",""
